### Potionq区块移动

既然我们知道了区块移动是如何工作的，那我们现在就可以把这些命令映射成可以在Portion文件里工作的方式了。

首先我们需要确定Potion文件里的“区块”是什么。因为我们有两组可以使用的区块移动命令，所以我们可以使用两组“模式”，这样我们的用户就可以选择使用他们自己喜欢的。

我们使用下面两种模式来定义Portion区块的开始：

- 1. 所有后面跟着一个空行并且是以非空字符开始的行，或者是文件的第一行。
- 2. 所有第一个字符非空，并且行内包含等号，且该行以冒号结尾。

现在使用简单扩展后的`factorial.pn`的文件，下面是我们的规则中会作为区块头的样子：

<pre><code
# factorial.pn                              1
# Print some factorials, just for fun.

factorial = (n):                            1 2
    total = 1

    n to 1 (i):
        total *= i.

    total.

print_line = ():                            1 2
    "-=-=-=-=-=-=-=-\n" print.

print_factorial = (i):                      1 2
    i string print
    '! is: ' print
    factorial (i) string print
    "\n" print.

"Here are some factorials:\n\n" print       1

print_line ()                               1
10 times (i):
    print_factorial (i).
print_line ()
</code></pre>

我们的第一条规则定义的比较自由。它直接把一个“顶级的文本块”定义成一个区块。

第二个定义就比较严格一点了。它把一个区块定义为一个函数定义。






